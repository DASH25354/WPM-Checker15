<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WPM Quiz with Audio</title>
<style>
  body { font-family: Arial, sans-serif; padding: 30px; }
  #text { border: 1px solid #ccc; padding: 30px; margin-bottom: 30px; background: #f9f9f9; }
  #controls { margin: 30px 0; }
  #questions { margin-top: 30px; }
</style>
</head>
<body>

<h2>Three-minute Training</h2>

<style>
  audio {
    display: block;      /* ブロック表示にして余白を効かせる */
    margin-bottom: 3em;  /* 下に3行分の余白 */
  }
</style>
  
<!-- 音声再生 -->
<h3>Listen to the audio:</h3>
<audio controls>
  <source src="4.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

  
<!-- テキスト -->
<div id="text">
【4】Kazlaser is a comedian from the group Maple Chogokin. Fumi Nikaido is an actress. On August 10, 2025, they said they got married. Kazlaser is 41 years old and Fumi Nikaido is 30 years old. They first met in 2017 on a TV show together. At that time, Fumi Nikaido said she was a big fan of Kazlaser and liked his face. People online are talking a lot about their meeting. After about eight years, they shared their happy news on Kazlaser’s X (Twitter) account. Kazlaser wrote that they got married and thanked everyone. He also said that both of them are very unique and sometimes they may have problems, but they want to have a happy family and always smile together. Many people are happy for them and wish them a happy life.</div>

<!-- スタート・フィニッシュボタン -->
<div id="controls">
  <button onclick="startReading()">▶ Start</button>
  <button onclick="finishReading()">⏹ Finish</button>
</div>

<!-- 4択クイズ -->
<div id="questions">
  <h3>Quiz</h3>
  <label>Select all options below that match the content of the passage.</label><br>
  <input type="checkbox" class="q1" value="a"> Kazlaser and Fumi Nikaido met for the first time in 2025.
<br>
  <input type="checkbox" class="q1" value="b"> Kazlaser and Fumi Nikaido got married in August 2025.
<br>
  <input type="checkbox" class="q1" value="c">  Fumi Nikaido said she was a big fan of Kazlaser.
<br>
  <input type="checkbox" class="q1" value="d"> Kazlaser and Fumi Nikaido have never worked together on TV.
<br>
</div>

<div id="result"></div>

<script>
let startTime;
let wordCount = 0;

function startReading() {
  const text = document.getElementById("text").innerText.trim();
  wordCount = text.split(/\s+/).length;
  startTime = Date.now();
  document.getElementById("result").innerText = "Reading started...";
}

function finishReading() {
  if (!startTime) return alert("Please start reading first!");
  const elapsedSec = (Date.now() - startTime) / 1000;

  // 正答の配列（複数正解対応）
  const correctAnswers = ["b","c"];

  // 選択されたチェックボックスを取得
  const checked = Array.from(document.querySelectorAll(".q1:checked")).map(el => el.value);

  // 正答数計算（余分に選んだものもペナルティにする場合は調整可能）
  const numCorrect = checked.filter(val => correctAnswers.includes(val)).length;

  // 正答率 = 選択された正答の割合
  const accuracy = numCorrect / correctAnswers.length;

  const rawWPM = (wordCount / elapsedSec) * 60;
  const finalWPM = Math.round(rawWPM * accuracy);

  document.getElementById("result").innerHTML =
    `Time: ${elapsedSec.toFixed(1)} sec<br>` +
    `Raw WPM: ${rawWPM.toFixed(1)}<br>` +
    `Accuracy: ${(accuracy*100).toFixed(0)}%<br>` +
    `Final WPM (accuracy applied): ${finalWPM}`;
}
</script>

</body>
</html>






